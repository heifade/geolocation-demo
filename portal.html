<html lang="zh-cn">
  <head>
    <meta charset="utf-8" />
  </head>
  <body>
    我是ReportPortal
    <textarea id="txt1" style="width: 100%; height: 30px"></textarea>

    <iframe src="powerbi.html" width="100%" height="50%"></iframe>
    <!-- <iframe src="reportControl1.html" width="100%" height="50%"></iframe> -->

    <script>
      window.onload = function () {
        var txt1 = document.getElementById("txt1");
        var iframe1 = document.getElementById("iframe1");
        function startSendPos() {
          navigator.geolocation.watchPosition(
            function (res) {
              console.log("get geolocation");

              let latitude = res.coords.latitude;
              let longitude = res.coords.longitude;

              const json = {
                type: "geolocation",
                data: {
                  latitude,
                  longitude,
                },
              };

              // window.frames[0].postMessage(json, "*");
              window.top.postMessage(json, "*");

              txt1.value = "发送位置: " + JSON.stringify(json) + "\n";
            },
            function (e) {
              console.log("error", e);
            },
            {
              enableHighAccuracy: true,
            }
          );
        }
        startSendPos();
      };
    </script>
  </body>
</html>
